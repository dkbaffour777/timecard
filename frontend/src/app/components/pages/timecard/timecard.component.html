<div id="timecard-container">
  <div id="today-filter">
    <small style="min-width: 300px">Showing timecard for {{ today }}</small>

    <div id="form-container">
      <mat-form-field>
        <mat-label class="mat-label">Choose a date</mat-label>
        <input matInput [matDatepicker]="picker" />
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle
          matIconSuffix
          [for]="picker"
        ></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <mat-form-field>
        <mat-label class="mat-label">Workstation Group</mat-label>
        <mat-select>
          @for (group of groups; track group) {
          <mat-option [value]="group.name">{{ group.name }}</mat-option>
          }
        </mat-select>
      </mat-form-field>

      <mat-form-field>
        <mat-label class="mat-label">Filter</mat-label>
        <input
          matInput
          (keyup)="applyFilter($event)"
          placeholder="Ex. Daniel"
          #input
        />
      </mat-form-field>
    </div>
  </div>

  <!-- Break Logs table container start-->
  <div class="table-container">
      <table mat-table [dataSource]="breakLogs">
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef class="scroll-column-head">Name</th>
          <td mat-cell *matCellDef="let breakLog" class="scroll-column">
            {{ breakLog.employee }}
          </td>
        </ng-container>

        <ng-container matColumnDef="breakType">
          <th mat-header-cell *matHeaderCellDef class="scroll-column-head">
            Break Type
          </th>
          <td mat-cell *matCellDef="let breakLog" class="scroll-column">
            <span>{{ breakLog.breakType }}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="punchOut">
          <th mat-header-cell *matHeaderCellDef class="scroll-column-head">
            Punch Out
          </th>
          <td
            mat-cell
            *matCellDef="let breakLog"
            class="scroll-column"
            (mouseover)="displayButton($event)"
            (mouseleave)="hideButton($event)"
          >
            <div>
              @if(breakLog.punchOut) {
              <span>{{ formatDate(breakLog.punchOut) }}</span>
              }@else {
              <span>{{ breakLog.punchOut }}</span>
              }
              <button mat-button (click)="punch(breakLog, 'punchOut')">
                Punch
              </button>
            </div>
          </td></ng-container
        >

        <ng-container matColumnDef="punchIn">
          <th mat-header-cell *matHeaderCellDef class="scroll-column-head">
            Punch In
          </th>
          <td
            mat-cell
            *matCellDef="let breakLog"
            class="scroll-column"
            (mouseover)="displayButton($event)"
            (mouseleave)="hideButton($event)"
          >
            <div>
              @if(breakLog.punchIn) {
              <span>{{ formatDate(breakLog.punchIn) }}</span>
              }@else {
              <span>{{ breakLog.punchIn }}</span>
              }
              <button mat-button (click)="punch(breakLog, 'punchIn')">
                Punch
              </button>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="timeSpent">
          <th mat-header-cell *matHeaderCellDef class="scroll-column-head">
            Time Spent
          </th>
          <td mat-cell *matCellDef="let breakLog" class="scroll-column">
            {{ breakLog.getTimeSpent(breakLog.punchOut, breakLog.punchIn) }}
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="scrollableDisplayedColumns"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: scrollableDisplayedColumns"
        ></tr>
      </table>
  </div>

  <mat-paginator
    [pageSizeOptions]="[5]"
    aria-label="Select page of users"
    style="width: 100%; background-color: #ffff"
  ></mat-paginator>
  <!-- Break Logs table container end-->
</div>
