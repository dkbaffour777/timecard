<div id="timecard-container">
  <div id="today-filter">
    <small style="min-width: 300px; margin-bottom: 20px"
      >Showing timecard for {{ currentDateDisplay }}</small
    >

    <div id="form-container">
      <mat-form-field>
        <mat-label class="mat-label">Filter</mat-label>
        <input
          matInput
          (keyup)="applyFilter($event)"
          placeholder="Ex. Daniel"
          #input
        />
      </mat-form-field>

      <mat-form-field>
        <mat-label class="mat-label">Choose a date</mat-label>
        <input
          matInput
          [matDatepicker]="picker"
          [(ngModel)]="selectedCreationDate"
        />
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle
          matIconSuffix
          [for]="picker"
        ></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <mat-form-field>
        <mat-label class="mat-label">Workstation</mat-label>
        <mat-select [(value)]="selectedWorkstationId_filterTable">
          <mat-option>None</mat-option>
          @for (workstation of workstations; track workstation) {
          <mat-option [value]="workstation.id">{{
            workstation.name
          }}</mat-option>
          }
        </mat-select>
      </mat-form-field>

      <div style="margin-top: 10px">
        <button mat-button (click)="updateBreakLogs()">Submit</button>
      </div>
    </div>
  </div>

  <!-- Break Logs table container start-->
  <div class="table-container">
    <table mat-table [dataSource]="breakLogs">
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef class="scroll-column-head">
          Name
        </th>
        <td mat-cell *matCellDef="let breakLog" class="scroll-column">
          {{ breakLog.employeeName }}
        </td>
      </ng-container>

      <ng-container matColumnDef="breakType">
        <th mat-header-cell *matHeaderCellDef class="scroll-column-head">
          Break Type
        </th>
        <td mat-cell *matCellDef="let breakLog" class="scroll-column">
          <span>{{ breakLog.breakType }}</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="punchOut">
        <th mat-header-cell *matHeaderCellDef class="scroll-column-head">
          Punch Out
        </th>
        <td
          mat-cell
          *matCellDef="let breakLog"
          class="scroll-column"
          (mouseover)="displayButton($event)"
          (mouseleave)="hideButton($event)"
        >
          <div>
            @if(breakLog.punchOut) {
            <span>{{ formatTimeStampDate(breakLog.punchOut) }}</span>
            }@else {
            <span>{{ 0 }}</span>
            }
            <button mat-button (click)="punch(breakLog, 'punchOut')">
              Punch
            </button>
          </div>
        </td></ng-container
      >

      <ng-container matColumnDef="punchIn">
        <th mat-header-cell *matHeaderCellDef class="scroll-column-head">
          Punch In
        </th>
        <td
          mat-cell
          *matCellDef="let breakLog"
          class="scroll-column"
          (mouseover)="displayButton($event)"
          (mouseleave)="hideButton($event)"
        >
          <div>
            @if(breakLog.punchIn) {
            <span>{{ formatTimeStampDate(breakLog.punchIn) }}</span>
            }@else {
            <span>{{ 0 }}</span>
            }
            <button mat-button (click)="punch(breakLog, 'punchIn')">
              Punch
            </button>
          </div>
        </td>
      </ng-container>

      <ng-container matColumnDef="timeSpent">
        <th mat-header-cell *matHeaderCellDef class="scroll-column-head">
          Time Spent
        </th>
        <td mat-cell *matCellDef="let breakLog" class="scroll-column">
          {{ breakLog.timeSpent }}
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="scrollableDisplayedColumns"></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: scrollableDisplayedColumns"
      ></tr>
    </table>
  </div>

  <div style="display: flex; justify-content: space-between; margin-top: 30px">
    <div style="display: flex; gap: 20px">
      <div>
        <mat-form-field>
          <mat-label class="mat-label">Workstation</mat-label>
          <mat-select [(value)]="selectedWorkstationId_createBreakLog">
            <mat-option>None</mat-option>
            @for (workstation of workstations; track workstation) {
            <mat-option [value]="workstation.id">{{
              workstation.name
            }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
        <div style="font-size: 12px; width: 210px">
          Add today's break log sheet.
        </div>
      </div>

      <div style="margin-top: 10px">
        <button mat-button (click)="addBreakLogSheet()">Submit</button>
      </div>
    </div>

    <mat-paginator
      [pageSizeOptions]="[5]"
      aria-label="Select page of users"
      style="width: 100%; background-color: #ffff"
    ></mat-paginator>
  </div>
  <!-- Break Logs table container end-->

  <app-loader></app-loader>
</div>
